<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Apr 13, 2013 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Più Bella API Getting Started Guide</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Joseph Lark, Agathe Mollé and Hugo Mougard" />
    <meta name="Date-Revision-yyyymmdd" content="20130413" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Più Bella
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2013-04-13</span>
                  &nbsp;| <span id="projectVersion">Version: 0.1</span>
                      </div>
            <div class="xright">                    <a href="http://data.nantes.fr/donnees/detail/jours-de-collectes-des-dechets-a-nantes/" class="externalLink" title="Nantes Open Data dataset page">Nantes Open Data dataset page</a>
            |
                        <a href="https://developers.google.com/appengine/" class="externalLink" title="App Engine Documentation">App Engine Documentation</a>
            |
                        <a href="https://maven.apache.org/" class="externalLink" title="Maven">Maven</a>
              
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Più Bella</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="about.html" title="What is Più Bella">What is Più Bella</a>
            </li>
                  <li class="none">
                          <a href="problems.html" title="Interesting problems we solved">Interesting problems we solved</a>
            </li>
                  <li class="none">
                          <a href="team-list.html" title="The Team!">The Team!</a>
            </li>
          </ul>
                       <h5>Developer documentation</h5>
                  <ul>
                  <li class="none">
            <strong>Getting Started with the APIs</strong>
          </li>
                  <li class="none">
                          <a href="source-repository.html" title="Source Repository">Source Repository</a>
            </li>
                  <li class="none">
                          <a href="sources.html" title="Installing from sources">Installing from sources</a>
            </li>
                  <li class="none">
                          <a href="dependencies.html" title="Dependencies">Dependencies</a>
            </li>
                  <li class="none">
                          <a href="apidocs/index.html" title="Javadoc">Javadoc</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Getting Started<a name="Getting_Started"></a></h2><p>Pi&#xf9; Bella exposes mainly two APIs. Both APIs require a valid OAuth token. If none is provided, a 403 will be returned.</p><p>The first one of those two APIs handles users, the second one notifications.</p></div><div class="section"><h2>User API<a name="User_API"></a></h2><p>The <tt>GET</tt> method allows to retrieve the info stocked about a particular user.</p><p>The only parameter is the <tt>access_token</tt>.</p><p>Example request:</p><div class="source"><pre>curl 'https://piu-bella.appspot.com/user' \
        -d access_token=ya29.AHES6ZSCCZrxY8qQ_UTxg0H_0Br5P-tyr44JLGzXRRZI5YFG</pre></div><p>The <tt>DELETE</tt> method allows to delete the user that is the owned of the access_token given.</p><p>Here using normal style:</p><div class="source"><pre>curl -X DELETE -G 'https://piu-bella.appspot.com/user' \
        -d 'access_token=ya29.AHES6ZQe4v8DjgpSJT-L7M7VPWu7IB03QiteHfN8V3nSajhz'</pre></div><p>Here using limited browser style:</p><div class="source"><pre>curl -X POST 'https://piu-bella.appspot.com/user' \
        -d 'method=delete' \
        -d 'access_token=ya29.AHES6ZSCCZrxY8qQ_UTxg0H_0Br5P-tyr44JLGzXRRZI5YFG'</pre></div></div><div class="section"><h2>Notifications<a name="Notifications"></a></h2><p>The <tt>GET</tt> method allows to retrieve the notifications of a particular user.</p><div class="source"><pre>curl -X GET -G 'https://piu-bella.appspot.com/notification' \
        -d 'access_token=ya29.AHES6ZTanW_s_BIrpAb3UKkvB0KONnBmcOu_QrJQIu7aPrMD'</pre></div><p>Here the answer coud be, for example:</p><div class="source"><pre>{
        &quot;status&quot;:&quot;success&quot;,
        &quot;data&quot;: [
                        {
                                &quot;id&quot;:0,
                                &quot;blue&quot;: [&quot;XMPP&quot;],
                                &quot;street&quot;: &quot;Avenue Saint Goazec&quot;,
                                &quot;yellow&quot;: [&quot;XMPP&quot;]
                        },
                        {
                                &quot;id&quot;: 1,
                                &quot;blue&quot;: [&quot;EMAIL&quot;, &quot;XMPP&quot;],
                                &quot;street&quot;: &quot;Rue Jules Br&#xe9;choir&quot;,
                                &quot;yellow&quot;: [&quot;EMAIL&quot;, &quot;XMPP&quot;]
                        },
                        {
                                &quot;id&quot;: 2,
                                &quot;blue&quot;: [&quot;EMAIL&quot;, &quot;XMPP&quot;],
                                &quot;street&quot;: &quot;Rue Paul Ramadier&quot;,
                                &quot;yellow&quot;: [&quot;XMPP&quot;]
                        }
                ]
}</pre></div><p>The answer always contains a status field, set at <tt>success</tt> or <tt>error</tt>. It then contains a <tt>data</tt> field or an <tt>error</tt> field depending the result. The <tt>error</tt> field contains a string describing the error.</p><p>The <tt>data</tt> field contains a list of objects with the following fields: one is an identifier, another one is the street of the notification, the last two are a list of channels to reach the user on blue and yellow collect days.</p><p>The <tt>PUT</tt> method allows to edit the user's notifications. Required arguments are the <tt>access_token</tt> and a <tt>field</tt> containing an array of objects of the form of the one returned by the <tt>GET</tt> method, minus the <tt>ids</tt>. We will present an exemple with an empty json field, which erases all notifications, because anything else would quickly become unreadable:</p><p>First, in normal style:</p><div class="source"><pre>curl -X PUT -G 'https://piu-bella.appspot.com/notification' \
        -d 'access_token=ya29.AHES6ZTanW_s_BIrpAb3UKkvB0KONnBmcOu_QrJQIu7aPrMD' \
        -d 'method=put' \
        -d 'json=[]'</pre></div><p>Now, in browser style:</p><div class="source"><pre>curl -X POST 'https://piu-bella.appspot.com/notification' \
        -d 'access_token=ya29.AHES6ZTanW_s_BIrpAb3UKkvB0KONnBmcOu_QrJQIu7aPrMD' \
        -d 'method=put' \
        -d 'json=[]'</pre></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2013
                        <a href="https://github.com/organizations/AtalM1">ATAL</a>.
            All Rights Reserved.      
        
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
